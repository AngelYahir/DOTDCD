<div class="row">
	<div class="col-xl-12">
		<div id="panel-1" class="panel">
			<div class="panel-hdr">
				<h2>
					Buscar Clientes <span class="fw-300"><i>DOTDCD - ERP</i></span>
				</h2>
				<div class="panel-toolbar">
					<button class="btn btn-panel" data-action="panel-collapse" data-toggle="tooltip" data-offset="0,10"
						data-original-title="Collapse"></button>
					<button class="btn btn-panel" data-action="panel-fullscreen" data-toggle="tooltip"
						data-offset="0,10" data-original-title="Fullscreen"></button>
					<button class="btn btn-panel" data-action="panel-close" data-toggle="tooltip" data-offset="0,10"
						data-original-title="Close"></button>
				</div>
			</div>
			<div class="panel-container show">
				<div class="panel-content">
					<!-- datatable start -->
					<table id="dt-basic-example" class=" table table-bordered table-hover table-striped w-100">
						<thead class="bg-primary-600">
							<tr>
								<th>Razón Social</th>
								<th>RFC</th>
								<th>Calle</th>
								<th>Colonia</th>
								<th>Municipio</th>
								<th>Estado</th>
								<th>Código Postal</th>
								<th>Teléfono</th>
								<th>Contacto</th>
								<th>Correo</th>
								<th>Estatus</th>
								<th>Acciones</th>
							</tr>
						</thead>
						<tbody>

						</tbody>
					</table>
					<!-- datatable end -->
				</div>
			</div>
		</div>
	</div>
</div>

{{#section 'scripts'}}

<script src="/js/datagrid/datatables/datatables.bundle.js"></script>
<script src="/js/datagrid/datatables/datatables.export.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.6.5/dist/sweetalert2.all.min.js"></script>

<script>
	//? Hice esto pero no jala :( 
	
	async function showModalPut(data) {
		const { value: formValues } = await Swal.fire({
			title: 'Editar Cliente',
			html:
				'<input id="swal-input1" class="swal2-input" value="' + data.cliente_razon_social + '" placeholder="Ingresa el razon social del cliente" required autofocus>' +
				'<select id="swal-input2" class="swal2-input" required autofocus>' +
				'<option value="0" ' + (data.cliente_estatus_baja == 0 ? 'selected' : '') + '>Activo</option>' +
				'<option value="1" ' + (data.cliente_estatus_baja == 1 ? 'selected' : '') + '>Inactivo</option>' +
				'</select>'+
				'<input id="swal-input3" class="swal2-input" value="'+ data.cliente_rfc +'">' +
				'<input id="swal-input4" class="swal2-input" value="'+ data.cliente_calle +'">' +
				'<input id="swal-input5" class="swal2-input" value="'+ data.cliente_colonia +'">' +
				'<input id="swal-input6" class="swal2-input" value="'+ data.cliente_municipio +'">' +
				'<input id="swal-input7" class="swal2-input" value="'+ data.cliente_estado +'">' +
				'<input id="swal-input8" class="swal2-input" value="'+ data.cliente_codigo_postal +'">' +
				'<input id="swal-input9" class="swal2-input" value="'+ data.cliente_telefono +'">' +
				'<input id="swal-input10" class="swal2-input" value="'+ data.cliente_contacto +'">' +
				'<input id="swal-input11" class="swal2-input" value="'+ data.cliente_correo +'">',

			focusConfirm: false,
			preConfirm: () => {
				$.ajax({
					type: 'PUT',
					url: '/updCliente',
					dataType: 'json',
					data: { 
						cliente_id: data.cliente_id,
						cliente_razon_social: $('#swal-input1').val(),
						cliente_estatus_baja: $('#swal-input2').val(),
						cliente_rfc: $('#swal-input3').val(),
						cliente_calle: $('#swal-input4').val(),
						cliente_colonia: $('#swal-input5').val(),
						cliente_municipio: $('#swal-input6').val(),
						cliente_estado: $('#swal-input7').val(),
						cliente_codigo_postal: $('#swal-input8').val(),
						cliente_telefono: $('#swal-input9').val(),
						cliente_contacto: $('#swal-input10').val(),
						cliente_correo: $('#swal-input11').val()
						
					},
					success: function (resp) {
						if (resp.status == 200) {
							swal.fire({
								title: "Cliente actualizado!",
								text: resp.message,
								preConfirm() {
									location.reload();
								}
							})
						} else {
							swal.fire("Error!", resp.message, "error");
						}
					},
					error: function (resp) {
						swal.fire("Error!", resp.message, "error");
					}
				});
			}
		})
	}
	function showModalDel(id) {
		swal.fire({
			title: '¿Estas seguro?',
			text: "Esta acción no se puede deshacer! \n ¿Deseas continuar?",
			icon: 'warning',
			showCancelButton: true,
			confirmButtonColor: '#3085d6',
			cancelButtonColor: '#d33',
			confirmButtonText: 'Si, eliminar!'
		}).then((result) => {
			if (result.isConfirmed) {
				$.ajax({
					type: 'DELETE',
					url: '/administracion/clientes/delCielnte/' + id,
					dataType: 'json',
					success: function (resp) {
						if (resp.status == 200) {
							swal.fire({
								title: "Cliente eliminado!",
								text: resp.message,
								preConfirm() {
									location.reload();
								}
							})
						} else {
							swal.fire("Error!", resp.message, "error");
						}
					},
					error: function (resp) {
						swal.fire("Error!", resp.message, "error");
					}
				});
			}
		})
	}


	const cli = {{{ json cliArray }}}
	console.log(cli)
	$(document).ready(function () {

		// initialize datatable
		$('#dt-basic-example').dataTable(
			{
				data: cli,
				responsive: true,
				lengthChange: false,
				dom:
					"<'row mb-3'<'col-sm-12 col-md-6 d-flex align-items-center justify-content-start'f><'col-sm-12 col-md-6 d-flex align-items-center justify-content-end'lB>>" +
					"<'row'<'col-sm-12'tr>>" +
					"<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
				buttons: [

					{
						extend: 'pdfHtml5',
						text: 'PDF',
						titleAttr: 'Generate PDF',
						className: 'btn-outline-danger btn-sm mr-1'
					},
					{
						extend: 'excelHtml5',
						text: 'Excel',
						titleAttr: 'Generate Excel',
						className: 'btn-outline-success btn-sm mr-1'
					},
					{
						extend: 'csvHtml5',
						text: 'CSV',
						titleAttr: 'Generate CSV',
						className: 'btn-outline-primary btn-sm mr-1'
					},
					{
						extend: 'copyHtml5',
						text: 'Copy',
						titleAttr: 'Copy to clipboard',
						className: 'btn-outline-primary btn-sm mr-1'
					},
					{
						extend: 'print',
						text: 'Print',
						titleAttr: 'Print Table',
						className: 'btn-outline-primary btn-sm'
					}
				]
			});

	});
</script>

{{/section}}